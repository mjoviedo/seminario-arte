<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="snap.css">
</head>
<body>
    <section>
        <h1>Titulo</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt iusto expedita libero, eligendi distinctio hic excepturi quisquam et molestiae voluptates quo quam laborum debitis quasi temporibus quas impedit nobis exercitationem.</p>
    </section>
    <section>
        <h1>Titulo2</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt iusto expedita libero, eligendi distinctio hic excepturi quisquam et molestiae voluptates quo quam laborum debitis quasi temporibus quas impedit nobis exercitationem.</p>
    </section>
    <div id="scrolly">
        <div class="sticky-thing">
          <p></p>
        </div>

        <article>
          <div class="step" style="position: 50% 50%;" data-step="La batalla" data-size="110%" data-position="50% 50%">
            <p>La batalla de Chacabuco fue una decisiva contienda de la Independencia de Chile en la cual combatieron el Ejército de los Andes, formado por tropas de las Provincias Unidas del Río de la Plata y chilenas exiliadas en Mendoza, y el Ejército Realista, resultando en una firme victoria para el bando independentista comandado por el general José de San Martín. La batalla tuvo lugar el 12 de febrero de 1817, en la hacienda de Chacabuco (Colina), a 55 km al norte de la ciudad de Santiago. </p>
          
            
          </div>
          <div class="step" data-step="Antecedentes" data-size="180%" data-position="80% 50%">
            <p>Tras el desastre de Rancagua, que causó el fin de la Patria Vieja, los exiliados chilenos se trasladaron a Cuyo, donde se pusieron bajo las órdenes del general José de San Martín, gobernador de la provincia, que había desarrollado un plan para derrotar a los realistas atacando el Virreinato del Perú por mar desde Chile. La ocupación realista de Chile le obligaba a liberar primeramente ese país.</p>
          </div>
          <div class="step" data-step="Batalla" data-size="200%" data-position="10% 80%">
            <p>Tras reunirse el 9 de febrero en el Campamento de Curimón las columnas que cruzaron los Andes por "camino de Los Patos" junto con las que cruzaron por el "camino de Uspallata", se resolvió atacar en la madrugada del día 12. Con el fin de emplear una táctica de pinzas por el frente y la retaguardia, se dividieron a las tropas disponibles en dos:

            </p>
          </div>
          <div class="step" data-step="Batalla" data-size="180%" data-position="80% 90%">
            <p>La 1.ª División o ala derecha al mando de Miguel Estanislao Soler que debía atacar por el oeste, estaba compuesta por los batallones N.º 1 de Cazadores y Nº11, las compañías de Granaderos y Cazadores de los Batallones N.º 7 y N.º 8, el escuadrón N.º 4 de Granaderos, el escuadrón escolta del general en jefe y 7 piezas de artillería de 4" con 80 artilleros de dotación. Ascendía el total de esta columna a 2000 hombres.
              .</p>
          </div>
          <div class="step" data-step="Batalla" data-size="180%" data-position="10% 90%">
            <p>La 2.ª División o ala izquierda al mando de Bernardo O'Higgins debía atacar por el este; estaba formada por las compañías de fusileros de los batallones 7 y 8, los escuadrones restantes 1.º, 2.º y 3.º de Granaderos a caballo y 2 piezas de artillería (que perderían en el desfiladero) de 4" con el resto del batallón de artillería. Ascendía el total de esta columna a 1500 hombres.</p>
          </div>
          <div class="step" data-step=" " data-size="190%" data-position="80% 50%">
            <p>Mientras Soler rodeaba a los realistas por el camino de Montenegro, más suave pero mucho más largo, O'Higgins lo hacía por Cuesta Vieja, más corto pero en pendiente y mucho más peligroso, dirigiéndose en dos columnas, y enfrentándose con los adelantados realistas hasta encontrarse frente a frente con el grueso del ejército realista, por lo que decidió avanzar hacia el cerro Los Halcones y desplegar allí sus fuerzas, al tiempo que despachaba un mensajero para informar de la situación al general San Martín.

            </p>
          </div>
          <div class="step" data-step="" data-size="180%" data-position="10% 90%" style="padding-bottom: 30vh;">
            <p>Las fuerzas realistas, inferiores en número, estaban compuestas por el batallón Talavera, de soldados peninsulares, más otros dos provenientes principalmente de Chiloé y Valdivia.nota 7​ Inicialmente Maroto, consciente de la debilidad de sus tropas había conseguido que el gobernador apoyase la idea de retirarse al Maule y unir sus fuerzas a las de Concepción para presentar batalla a San Martín.10​ Pero Marco del Pont cambio de opinión rápidamente y le ordenó impedir que los republicanos avanzaran sobre Santiago. El general realista escogió la cuesta de Chacabuco como una posición defensiva, esperando detener a los patriotas mientras llegaban los refuerzos desde el sur.11​ Sin embargo, en un reconocimiento efectuado el día 12 Maroto notó que la cuesta estaba ocupada por los patriotas, e incapaz de tomarla tuvo que escoger entre retroceder a Colina o defender las posiciones donde estaba su ejército, delante del cerro de Victoria, cerca de la Hacienda de Chacabuco. Optó por esto último, lo que permitió a San Martín rodearlo con sus fuerzas más numerosas.12​
            </p>
            <p>
              <audio controls>
                <source src="audio/batalla-chacabuco.mp3" type="audio/mpeg">
                Your browser does not support the audio tag.
              </audio>
            </p>
          </div>
        </article>
    </div>
    <section>
        <h1>Titulo3</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt iusto expedita libero, eligendi distinctio hic excepturi quisquam et molestiae voluptates quo quam laborum debitis quasi temporibus quas impedit nobis exercitationem.</p>
    </section>
    <section>
        <h1>Titulo4</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt iusto expedita libero, eligendi distinctio hic excepturi quisquam et molestiae voluptates quo quam laborum debitis quasi temporibus quas impedit nobis exercitationem.</p>
    </section>
    <section>
        <h1>Titulo5</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nesciunt iusto expedita libero, eligendi distinctio hic excepturi quisquam et molestiae voluptates quo quam laborum debitis quasi temporibus quas impedit nobis exercitationem.</p>
    </section>



<!-- SCRIPTS -->

<script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
    <script src="https://unpkg.com/scrollama"></script>
    <script>
      // using d3 for convenience
      var main = document.querySelector("main");
      var scrolly = main.querySelector("#scrolly");
      var sticky = scrolly.querySelector(".sticky-thing");
      var article = scrolly.querySelector("article");
      var steps = article.querySelectorAll(".step");

      // initialize the scrollama
      var scroller = scrollama();

      // scrollama event handlers
      function handleStepEnter(response) {
        // response = { element, direction, index }
        var el = response.element;

        // remove is-active from all steps
        // then add is-active to this step
        steps.forEach(step => step.classList.remove('is-active'));
        el.classList.add('is-active');

        // update graphic based on step
        sticky.querySelector("p").innerText = el.dataset.step;
        sticky.style.backgroundSize = el.dataset.size;
        sticky.style.backgroundPosition = el.dataset.position;
      }

      function init() {
        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
          .setup({
            step: "#scrolly article .step",
            offset: 0.6,
            debug: true
          })
          .onStepEnter(handleStepEnter);

        // setup resize event
        window.addEventListener("resize", scroller.resize);
      }

      // kick things off
      init();
    </script>


</body>
</html>